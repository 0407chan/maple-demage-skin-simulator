(this["webpackJsonpmaple-demage-skin-simulator"]=this["webpackJsonpmaple-demage-skin-simulator"]||[]).push([[0],{244:function(e,n,t){},246:function(e,n,t){"use strict";t.r(n);t(140);var a,i,r,c,s,o,u,d,l,b,m,p,f,g,j,h,x,O,k,v=t(0),y=t.n(v),w=t(20),N=t.n(w),S=t(40),T=t(131),C=t(43),M=t(3),E=t(253),L=t(11),z=t.n(L),D=t(27),F=t(53),K=t.n(F),Q=function(){var e=Object(D.a)(z.a.mark((function e(n){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("https://maplestory.io/api/wz/KMS/353/Effect/DamageSkin.img/".concat(n.skinNumber,"/").concat(n.skinType,"/").concat(n.damageNumber));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=function(e){return Object(S.useQuery)(["getDamageSkin",e],Object(D.a)(z.a.mark((function n(){return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Q(e));case 1:case"end":return n.stop()}}),n)}))),{enabled:void 0!==e.skinNumber,retry:!1,keepPreviousData:!1,staleTime:36e5,refetchOnWindowFocus:!1})},I=function(){var e=Object(D.a)(z.a.mark((function e(n){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("https://maplestory.io/api/wz/KMS/353/Effect/DamageSkin.img/".concat(n.skinNumber,"/").concat(n.skinType));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=Object(D.a)(z.a.mark((function e(n){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("https://maplestory.io/api/KMS/352/item",{params:n});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),W=t(13),Y=t(14),A=Y.a.div(a||(a=Object(W.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: #282c34;\n  width: 100%;\n  height: 100%;\n"]))),B=Y.a.div(i||(i=Object(W.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: #282c34;\n  width: 100%;\n  height: 60px;\n"]))),J=Y.a.div(r||(r=Object(W.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: #282c34;\n  gap: 20px;\n  width: 100%;\n  height: 100%;\n"]))),$=(Y.a.span(c||(c=Object(W.a)(["\n  color: #eeeeee;\n  font-size: 18px;\n  font-weight: bold;\n"]))),Y.a.img(s||(s=Object(W.a)(["\n  cursor: pointer;\n"])))),H=function(e){var n=e.skinNumber,t=e.skinType;return{damage0:R({skinNumber:n,skinType:t,damageNumber:"0"}),damage1:R({skinNumber:n,skinType:t,damageNumber:"1"}),damage2:R({skinNumber:n,skinType:t,damageNumber:"2"}),damage3:R({skinNumber:n,skinType:t,damageNumber:"3"}),damage4:R({skinNumber:n,skinType:t,damageNumber:"4"}),damage5:R({skinNumber:n,skinType:t,damageNumber:"5"}),damage6:R({skinNumber:n,skinType:t,damageNumber:"6"}),damage7:R({skinNumber:n,skinType:t,damageNumber:"7"}),damage8:R({skinNumber:n,skinType:t,damageNumber:"8"}),damage9:R({skinNumber:n,skinType:t,damageNumber:"9"}),numberSpace:R({skinNumber:n,skinType:t,damageNumber:"numberSpace"}),guard:R({skinNumber:n,skinType:"NoRed0",damageNumber:"guard"}),Miss:R({skinNumber:n,skinType:"NoRed0",damageNumber:"Miss"}),resist:R({skinNumber:n,skinType:"NoRed0",damageNumber:"resist"}),criEffect:R({skinNumber:n,skinType:"NoCri1",damageNumber:"Effect3"})}},_=Object(Y.b)(o||(o=Object(W.a)(["\n  0% {\n    transform: translateY(0px);\n    opacity: 1;\n  }\n\n  50%{\n    transform: translateY(-40px);\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n    transform: translateY(-80px);\n  }\n"]))),q=Y.a.div(u||(u=Object(W.a)(["\n  display: flex;\n  position: absolute;\n  opacity: 0;\n  animation: "," 1s linear;\n"])),_),G=Y.a.div(d||(d=Object(W.a)(["\n  display: flex;\n"]))),U=t(2),V=function(e){var n=e.skinNumber,t=e.damageItem,a=e.setDamageList,i=Object(v.useState)(1e3),r=Object(M.a)(i,2),c=r[0],s=(r[1],Object(v.useState)(!0)),o=Object(M.a)(s,2),u=o[0],d=o[1],l=H({skinNumber:n,skinType:t.isCritical?"NoCri1":"NoRed1"}),b=(l.Miss,l.criEffect),m=l.damage0,p=l.damage1,f=l.damage2,g=l.damage3,j=l.damage4,h=l.damage5,x=l.damage6,O=l.damage7,k=l.damage8,y=l.damage9,w=(l.guard,l.numberSpace),N=(l.resist,function(e){switch(e){case 0:return m;case 1:return p;case 2:return f;case 3:return g;case 4:return j;case 5:return h;case 6:return x;case 7:return O;case 8:return k;case 9:default:return y}}),S=function(e){var n,t,a;return e.data&&e.data.value&&""!==e.data.value?Object(U.jsx)("img",{draggable:"false",style:{display:"flex",width:"fit-content",marginLeft:void 0!==(null===(n=w.data)||void 0===n?void 0:n.value)&&Number(null===(t=w.data)||void 0===t?void 0:t.value)<0?Number(null===(a=w.data)||void 0===a?void 0:a.value):void 0},src:"data:image/png;base64,".concat(e.data.value)}):null};return Object(v.useEffect)((function(){setTimeout((function(){a((function(e){return e.filter((function(e){return e.id!==t.id}))})),d(!1)}),c)}),[]),u?Object(U.jsxs)(q,{className:"no-drag",children:[t.isCritical&&Object(U.jsxs)(G,{children:[S(b)," "]}),"".concat(t.damage).split("").map((function(e,n){return Object(U.jsxs)("div",{children:[S(N(Number(e)))," "]},n)}))]}):null},X=t(252),Z=t(54),ee=t.n(Z),ne=Y.a.div(l||(l=Object(W.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100%;\n  gap: 16px;\n\n  ","\n"])),(function(e){return void 0!==e.gap&&{gap:e.gap}})),te=function(e){var n=e.gap,t=e.style,a=e.children;return Object(U.jsx)(ne,{gap:n,style:t,children:void 0!==n&&n<0?Object(U.jsx)("div",{style:{marginLeft:n},children:a}):a})},ae=function(){var e=Object(v.useState)({width:void 0,height:void 0}),n=Object(M.a)(e,2),t=n[0],a=n[1];Object(v.useEffect)((function(){function e(){a({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]);return{windowSize:t,isMobile:function(){return t.width&&t.width<=1e3}}},ie=Y.a.div(b||(b=Object(W.a)(["\n  display: flex;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 4;\n  background-color: rgba(0, 0, 0, 0.3);\n  ","\n"])),(function(e){return e.isOpen?{visibility:"visible",opacity:1}:{visibility:"hidden",opacity:0}})),re=Y.a.div(m||(m=Object(W.a)(["\n  display: flex;\n  position: absolute;\n  top: 20px;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(60, 60, 60, 0.93);\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.8);\n  border-radius: 5px;\n  border: 1px solid rgba(169, 169, 169, 0.9);\n  gap: 10px;\n  opacity: 0;\n  z-index: 10;\n  @media screen and (max-width: 400px) {\n    width: calc(100vw - 40px);\n    height: calc(100vh - 40px);\n  }\n  width: 360px;\n  height: calc(100vh - 40px);\n  transition: all 0.3s ease;\n  ","\n"])),(function(e){return e.isOpen?{visibility:"visible",opacity:1}:{visibility:"hidden",opacity:0}})),ce=Y.a.div(p||(p=Object(W.a)(["\n  display: flex;\n  width: 100%;\n  font-size: 12px;\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  color: #ffcc5f;\n  padding-top: 10px;\n  padding-bottom: 5px;\n"]))),se=Y.a.div(f||(f=Object(W.a)(["\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: column;\n  overflow-y: scroll;\n  gap: 4px;\n  width: 100%;\n  height: 100%;\n"]))),oe=Y.a.div(g||(g=Object(W.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 16px;\n  cursor: pointer;\n  padding: 4px 16px;\n  border-radius: 5px;\n\n  &:hover {\n    color: #eeeeee;\n    background-color: #7676767e;\n  }\n\n  .skin-img {\n  }\n  .skin-text {\n    color: #e1e1e1;\n  }\n"]))),ue=Y.a.span(j||(j=Object(W.a)(["\n  background-color: #ffc60a;\n  font-weight: bold;\n"]))),de=(Y.a.div(h||(h=Object(W.a)(["\n  display: flex;\n  width: 100%;\n  border-radius: 5px;\n  background-color: #eeeeeee7;\n"]))),Y.a.div(x||(x=Object(W.a)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: center;\n"]))),Y.a.button(O||(O=Object(W.a)(["\n  display: flex;\n  position: absolute;\n  top: 7px;\n  right: 10px;\n  font-weight: bold;\n  width: fit-content;\n  align-items: center;\n  border: unset;\n  background-color: unset;\n  justify-content: center;\n  color: #eeeeee;\n\n  &:hover {\n    cursor: pointer;\n    color: #ffd884;\n  }\n"])))),le=function(e){var n,t=e.isOpen,a=e.onCancel,i=e.hideCloseButton,r=void 0!==i&&i,c=Object(v.useState)([]),s=Object(M.a)(c,2),o=s[0],u=s[1],d=Object(v.useState)(""),l=Object(M.a)(d,2),b=l[0],m=(l[1],ae().isMobile,n={searchFor:"\ub370\ubbf8\uc9c0 \uc2a4\ud0a8"},Object(S.useQuery)(["getItemList",n],Object(D.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(n));case 1:case"end":return e.stop()}}),e)}))),{retry:!1,refetchOnWindowFocus:!1,keepPreviousData:!0}));Object(v.useEffect)((function(){var e,n=[];null===(e=m.data)||void 0===e||e.forEach((function(e){n.find((function(n){return n.name===e.name}))||!e.name.includes("\ub370\ubbf8\uc9c0 \uc2a4\ud0a8")||e.name.includes("\uc0c1\uc790")||e.name.includes("\uc800\uc7a5 \uc2a4\ud06c\ub864")||e.name.includes("1\uce78 \ud655\uc7a5\uad8c")||n.push(e)})),u(n)}),[m.data]),Object(v.useEffect)((function(){console.log("skinList",o)}),[o]);var p=function(e){var n=b.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),t=e.split(new RegExp("(".concat(n,")"),"gi"));return Object(U.jsx)(U.Fragment,{children:t.map((function(e,n){return e.toLowerCase()===b.toLowerCase()?Object(U.jsx)(ue,{children:e},n):Object(U.jsx)(y.a.Fragment,{children:e},n)}))})};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ie,{isOpen:t,onClick:a}),Object(U.jsxs)(re,{isOpen:t,children:[Object(U.jsx)(ce,{children:"\ub370\ubbf8\uc9c0 \uc2a4\ud0a8 \uc120\ud0dd"}),!r&&Object(U.jsx)(de,{onClick:a,children:"\u2716"}),Object(U.jsx)(se,{children:o.map((function(e,n){return Object(U.jsxs)(oe,{children:[Object(U.jsx)("img",{className:"skin-img",src:"https://maplestory.io/api/KMS/352/item/".concat(e.id,"/icon")}),Object(U.jsx)("span",{className:"skin-text",children:e.name?p(e.name):void 0})]},n)}))})]})]})},be=Y.a.div(k||(k=Object(W.a)(["\n  display: flex;\n  height: 100%;\n  width: 100%;\n  padding: 20px;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: row;\n"]))),me=function(e){var n=e.skinNumber,t=e.onSetSkinNumber,a=Object(v.useState)(!1),i=Object(M.a)(a,2),r=i[0],c=i[1];return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(be,{children:[Object(U.jsx)(ee.a,{onClick:function(){return c(!0)},children:"\uc2a4\ud0a8"}),Object(U.jsxs)(te,{style:{justifyContent:"center"},children:[Object(U.jsx)(ee.a,{disabled:1===n,onClick:function(){return t(n-1)},children:"-"}),Object(U.jsx)(X.a,{style:{width:60,textAlign:"center"},value:n,onChange:function(e){return t(e)}}),Object(U.jsx)(ee.a,{onClick:function(){return t(n+1)},children:"+"})]}),Object(U.jsx)(ee.a,{disabled:!0,children:"\uc138\ud305"})]}),Object(U.jsx)(le,{isOpen:r,onCancel:function(){return c(!1)}})]})},pe="".concat("/maple-demage-skin-simulator","/images/hit1_0.png"),fe=function(){var e,n=Object(v.useState)(200),t=Object(M.a)(n,2),a=t[0],i=t[1],r=Object(v.useState)("NoCri1"),c=Object(M.a)(r,2),s=c[0],o=(c[1],Object(v.useState)([])),u=Object(M.a)(o,2),d=u[0],l=u[1],b=Object(v.useState)(!1),m=Object(M.a)(b,2),p=m[0],f=m[1];e={skinNumber:a,skinType:s},Object(S.useQuery)(["getDamageSkinAll",e],Object(D.a)(z.a.mark((function n(){return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",I(e));case 1:case"end":return n.stop()}}),n)}))),{enabled:void 0!==e.skinNumber,retry:!1,keepPreviousData:!0,refetchOnWindowFocus:!1});function g(e,n){return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e))+e}return Object(U.jsxs)(A,{children:[Object(U.jsx)(B,{children:Object(U.jsx)(me,{onSetSkinNumber:function(e){i(e),l([])},skinNumber:a})}),Object(U.jsxs)(J,{className:"no-drag",children:[Object(U.jsx)(te,{style:{justifyContent:"center"},children:d.map((function(e){return Object(U.jsx)(V,{damageItem:e,setDamageList:l,skinNumber:a},e.id)}))}),Object(U.jsx)($,{draggable:"false",src:p?pe:"https://maplestory.io/api/KMS/356/mob/100004/render/stand",alt:"orange-mushroom",onClick:function(){return function(){f(!0);var e={id:Object(E.a)(),skinNumber:a,damage:g(1e5,4e5),isCritical:100*Math.random()<60};setTimeout((function(){f(!1)}),1e3),l([].concat(Object(C.a)(d),[e]))}()}})]})]})},ge=(t(244),new S.QueryClient);N.a.render(Object(U.jsx)(y.a.StrictMode,{children:Object(U.jsx)(S.QueryClientProvider,{client:ge,children:Object(U.jsx)(T.a,{children:Object(U.jsx)(fe,{})})})}),document.getElementById("root"))}},[[246,1,2]]]);